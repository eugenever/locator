[server]
http_port = 8080
num_http_workers = 4 # number of Actix workers
max_payload_mb = 50
log_level = "info"
creditional_tokens = [
    "SECRET-TOKEN",
    "axC7NmKh3NmQt5gvhNHEew2l8rKY9cGuUZsaq3b6WejVNzzk31J70yjlt2gOGYKz"
] # authorization token for the public API

[database]
max_connections_db = 25
report_processing_frequency = 60 # frequency of processing reports from PostgreSQL, seconds
report_number_days_search = 3 # report sampling depth, days
report_keep_days = 180 # delete partitions after the specified number of days have passed

[threadpool]
core_size = 2 # minimum number of hot threads
max_size = 8 # maximum number of all threads
keep_alive = 60 # lifetime of threads without load

[locator]
report_queue_size = 150000
tasks_processing_reports_count = 4
process_report_online = true
radius_wifi_detection = 500
h3_resolution = 8
max_distance_in_cluster = 200 # meters
max_distance_cell = 2500 # meters
laa_filter = false # filter Locally Administered Addresses

[t38]
gc_frequency = 1800 # seconds
aofshrink_frequency = 1 # day
healthz_frequency = 1 # every second
instances = [
    { host = "127.0.0.1", port = 9851 },
    { host = "127.0.0.1", port = 9852 }
]
# sentinel = [
#     { host = "127.0.0.1", port = 26379 }
# ]

[yandex-lbs]
enabled = false
url = "https://locator.api.maps.yandex.ru/v1/locate?apikey="
api_keys = [
    "b9da27e2-8440-4561-8a09-c0c9781410a1",
    "e6e1e16a-e5f1-4db4-afc9-d622f21530d6",
    "36d4b423-a401-4b72-878d-a22ebfc0e4a0",
    "b23b0737-3a71-48d8-a2d5-db72c0c6634c",
    "3cf34204-7b2d-4ae6-bd2d-fdb398071b9c",
    "2946aaad-5ea9-47bc-af4a-369b17c1b409",
    "82b0687f-8090-4a47-b64f-e78dac728881",
    "250439fe-d5ef-4272-91cb-d8204aee64a3",
    "508ee197-e0ac-4366-96a6-d57c582f9cbd",
    "aa31c5c9-d8f5-4b38-b006-1a5a674a5616",
    "65f78936-2ae4-4f68-80d5-098df9f5c448",
    "9f34a8fb-b012-43e1-9e37-ecba87aa18cd",
    "a765ec4f-7902-4719-aa32-b48888126980"
]
rate_limit = 10 # maximum number of simultaneous requests
max_distance_in_cluster = 500

[altergeo-lbs]
enabled = true
apikey = "AQIAALXdP0BQvPl12g_GPUJ6KehlkEOe"
url = "http://api.platform.altergeo.ru/getlocation"

[graphhopper]
host = "127.0.0.1"
port = 8989
rate_limit_matching = 8 # maximum number of simultaneous requests

[graphhopper.admin]
host = "127.0.0.1"
port = 8990
gc_frequency = 300 # Enable/Disable Garbage Collection in GraphHopper